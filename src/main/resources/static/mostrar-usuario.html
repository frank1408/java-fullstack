<!DOCTYPE html>
<html lang="es-GT">
<head>
<meta charset="utf-8">
<title>Usuario</title>
</head>
<body>
<a href="/index.html">Index</a>
<input required autocomplete="on" type="text" id="uid" placeholder="id numeric value"  />
<button onclick="cargarUsuario()">
Mostrar Usuario
</button>

<table id="tusuario">
<thead>
<tr>
<th>Id</th>
<th>Nombre y apellido</th>
<th>Correo</th>
<th>Telefono</th>
<th>Opciones</th>
</tr>
</thead>
<tbody>
</tbody>
</table>

<script>
async function cargarUsuario() {

limpiar();
	let uid = document.getElementById("uid");
	uid = uid.value;
	const urlApi = "http://localhost:8000/api/usuarios/" + uid;

	const objetoInfo = {
	/*
	mode: 'cors', // no-cors, cors, same-origin
	*/
	method: "GET",
	headers: {
	/*
	"Access-Control-Allow-Origin": "*",
	"Access-Control-Allow-Methods": "*",
	"Access-Control-Allow-Headers": "*",
	*/
	"Content-Type": "application/json",
	"Accept": "application/json",
	"Authorization": localStorage.token 
	}
	}; /* objetoInfo */

	let ans = await fetch( urlApi, objetoInfo );
	if( ans == null || ans == undefined ){
	alert("no hay usuario con ese id");
	return -1;
	}
	/*ans = await ans.json();*/
	/*ans = await ans.text();*/


	let x = document.querySelector("#tusuario tbody");
	x.innerHTML = "";

	try{
	ans = await ans.json();
	let uusuario = ans;

	
		let filaUsuario = `
		<tr>

		<td>
		${uusuario.id}
		</td>

		<td>
		${uusuario.nombre} ${uusuario.apellido}
		</td>

		<td>
		${uusuario.correo}
		</td>

		<td>
		${uusuario.telefono}
		</td>

		<td>
		<!--
		<a href="#" onclick="deleteUsuario( ${uusuario.id} )">DELETE</a>
		-->
		</td>
		</tr>
		`;
		x.innerHTML += filaUsuario;

		}catch( err ){
			alert("404 Not found");
			/*console.log( err );*/
		} /* catch */


} // function cargarUsuario

function limpiar(){
	let x = document.querySelector("#tusuario tbody");
	x.innerHTML = "";
}

</script>
</body>
</html>

